<!doctype html>
<html class="a">
 <head>
  <title>window.performance.timing attributes</title>
  <script src="../../../resources/testharness.js"></script>
  <script src="../../../submission/Microsoft/NavigationTiming/mstestharness.js"></script>
</head>
<body class="a">
  <h1>Description</h1>
  <p>This test validates that all of the window.performance.timing attributes remain unchanged after an in document navigation (URL fragment change).</p>

  <div id="log"></div>
  <script>
var timing = performanceNamespace.timing;

function checkTimingNotChanged() {
    properties = Object.keys(timing).sort();
    for (var i = 0; i < properties.length; ++i) {
        property = properties[i];
        test_equals(timing[property], initialTiming[property],
                    property + " is the same after in document navigation.")
    }
}

var initialTiming = {};
function saveTimingAfterLoad() {
    for (var property in timing) {
        initialTiming[property] = timing[property];
    }
    window.location.href = "#1";
    setTimeout("checkTimingNotChanged()", 0);
}

function loadHandler() {
    window.removeEventListener("load", loadHandler);
    setTimeout("saveTimingAfterLoad()", 0);
}
window.addEventListener("load", loadHandler, false);
  </script>
</body>
</html>
